{% extends "layouts/page.html" %}
{% block custom_css %}
    <link href="{{ url_for('static', filename='css/property/unit.css') }}" rel="stylesheet">
{% endblock %}

{% block content %}
    <ul class="nav nav-tabs">
        <li class="nav-item">
            <a class="nav-link active" data-toggle="tab" href="#property-details"><strong>Property Details</strong></a>
        </li>
        <li class="nav-item">
            <a class="nav-link" data-toggle="tab" href="#units-list"><strong>Units List</strong></a>
        </li>
    </ul>

    <div class="tab-content">
        <!-- Property Details -->
        <div id="property-details" class="tab-pane fade show active">
<div class="card">
    <div class="card-header d-flex justify-content-between align-items-center">
        <h3 class="card-title"><strong>{{ property.name }}</strong></h3>
        <div>
            <a href="{{ url_for('companies.get_company', company_id=property.company_id) }}" class="btn btn-sm btn-warning">
                <i class="ti-desktop"> </i> Company
            </a>

            <a href="#" class="btn btn-sm btn-success">
                <i class="ti-desktop"> </i> Edit
            </a>
        </div>
    </div>
    <div class="row">
        <div class="card-body col-sm-12 col-lg-6 col-md-6">
            <ul class="list-group">
            <li class="list-group-item"><strong>Name:</strong> <span class="text-right">{{ property.name }}</span></li>
            <li class="list-group-item"><strong>Address:</strong> <span class="text-right">{{ property.address }}</span></li>
            <li class="list-group-item"><strong>Property Type:</strong> <span class="text-right">{{ property.property_type }}</span></li>
            <li class="list-group-item"><strong>Number of Units:</strong> <span class="text-right">{{ property.number_of_units }}</span></li>
            <li class="list-group-item"><strong>Available Units:</strong> <span class="text-right">{{ property.available_units }}</span></li>
            <li class="list-group-item"><strong>Amenities:</strong> <span class="text-right">{{ property.amenities }}</span></li>
            </ul>
        </div>
        <div class="card-body col-sm-12 col-lg-6 col-md-6">
            <ul class="list-group">
                <li class="list-group-item"><strong>Landlord:</strong> <span class="text-right">{{ property.landlord }}</span></li>
            <li class="list-group-item"><strong>Maintenance Contact:</strong> <span class="text-right">{{ property.maintenance_contact }}</span></li>
            <li class="list-group-item"><strong>Lease Terms:</strong> <span class="text-right">{{ property.lease_terms }}</span></li>
            <li class="list-group-item"><strong>Description:</strong> <span class="text-right">{{ property.description }}</span></li>
            <li class="list-group-item"><strong>Built Year:</strong> <span class="text-right">{{ property.built_year }}</span></li>
            <li class="list-group-item"><strong>Parking Spots:</strong> <span class="text-right">{{ property.parking_spots }}</span></li>
            </ul>
        </div>
    </div>
</div>

        </div>

        <!-- Units List -->
        <div id="units-list" class="tab-pane fade">
        <div class="card">
        <div class="card-header d-flex justify-content-between align-items-center">
            <h3 class="card-title"><span class="font-weight-bold">{{ property.name }}</span></h3>
            <div>
                <button id="add-unit-btn" class="btn btn-sm btn-primary mr-2"><i class="ti-save"> </i> Add</button>
            </div>
        </div>
        </div>
        <div class="card-body ">
            <table class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <th>Unit Number</th>
                        <th>Is Occupied</th>
                        <th>Rental Amount</th>
                        <th class="d-none d-sm-table-cell">Tenant ID</th>
                        <th class="d-none d-sm-table-cell">Lease Start Date</th>
                        <th class="d-none d-sm-table-cell">Lease End Date</th>
                        <th class="d-none d-sm-table-cell">Unit Area</th>
                        <th class="d-none d-sm-table-cell">Has Reception</th>
                    </tr>
                </thead>
                <tbody>
                    {% for unit in units %}
                        <tr>
                            <td>{{ unit.unit_id }}</td>
                            <td>{{ unit.is_occupied }}</td>
                            <td>{{ unit.rental_amount }}</td>
                            <td class="d-none d-sm-table-cell">{{ unit.tenant_id }}</td>
                            <td class="d-none d-sm-table-cell">{{ unit.lease_start_date }}</td>
                            <td class="d-none d-sm-table-cell">{{ unit.lease_end_date }}</td>
                            <td class="d-none d-sm-table-cell">{{ unit.unit_area }}</td>
                            <td class="d-none d-sm-table-cell">{{ unit.has_reception }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        <div id="add-unit-container" class="card add-unit-container hidden">
            <div class="card-header">
                <h3 class="card-title">Add Units</h3>
                <span><strong>Property Name:</strong> <em>{{ property.name }}</em></span>
            </div>

            <div>
                <div class="card-body col-lg-6 col-md-6 col-sm-12">
                    <form action="{{ url_for('buildings.do_add_unit', building_id=property.property_id) }}" method="post">
                        <!-- Add units form fields -->
                        <input type="hidden" name="property_id" value="{{ property.property_id }}">
                        <div class="form-group">
                            <label for="unit_id">Unit Number:</label>
                            <input class="form-control" type="text" name="unit_id">
                        </div>

                        <div class="form-group">
                            <label for="rental_amount">Rental Amount:</label>
                            <input class="form-control" type="number" name="rental_amount">
                        </div>

                        <div class="form-group">
                            <label for="unit_area">Unit Area:</label>
                            <input class="form-control" type="number" name="unit_area">
                        </div>
                        <div class="form-group">
                            <label for="has_reception"><strong>Has Reception</strong>
                            <input class="form-control" type="checkbox" name="has_reception"></label>
                        </div>
                        <button type="submit" class="btn btn-primary"><i class="ti-save"> </i> Save</button>
                    </form>
                </div>
            </div>
        </div>



        </div>
        </div>
    </div>
{% endblock %}

{% block scripts %}
    <script src="{{ url_for('static', filename='js/property/manager.js') }}"></script>
{% endblock %}