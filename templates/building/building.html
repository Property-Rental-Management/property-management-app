{% extends "layouts/page.html" %}
{% block custom_css %}
    <link href="{{ url_for('static', filename='css/property/unit.css') }}" rel="stylesheet">
{% endblock %}

{% block content %}
    <ul class="nav nav-tabs">
        <li class="nav-item">
            <a class="nav-link active" data-toggle="tab" href="#property-details"><strong>Property Details</strong></a>
        </li>
        <li class="nav-item">
            <a class="nav-link" data-toggle="tab" href="#units-list"><strong>Units List</strong></a>
        </li>
    </ul>

    <div class="tab-content">
        <!-- Property Details -->
        <div id="property-details" class="tab-pane fade show active">
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h3 class="card-title"><strong>{{ property.name }}</strong></h3>
                    <div>
                        <a href="{{ url_for('companies.get_company', company_id=property.company_id) }}" class="btn btn-sm btn-warning">
                            <i class="ti-desktop"> </i> Company
                        </a>
                        {#    {{ url_for('buildings.edit_building', building_id=property.property_id) }}#}
                        <a href="#" class="btn btn-sm btn-success" data-toggle="modal" data-target="#editPropertyDialog">
                            <i class="ti-desktop"> </i> Edit
                        </a>
                    </div>
                </div>
                <div class="row">
                    <div class="card-body col-sm-12 col-lg-6 col-md-6">
                        <ul class="list-group">
                        <li class="list-group-item"><strong>Name:</strong> <span class="text-right">{{ property.name }}</span></li>
                        <li class="list-group-item"><strong>Location:</strong> <span class="text-right">{{ property.address }}</span></li>
                        <li class="list-group-item"><strong>Property Type:</strong> <span class="text-right">{{ property.property_type }}</span></li>
                        <li class="list-group-item"><strong>Number of Units:</strong> <span class="text-right">{{ property.number_of_units }}</span></li>
                        <li class="list-group-item"><strong>Available Units:</strong> <span class="text-right">{{ property.available_units }}</span></li>
                        <li class="list-group-item"><strong>Amenities:</strong> <span class="text-right">{{ property.amenities }}</span></li>
                        </ul>
                    </div>
                    <div class="card-body col-sm-12 col-lg-6 col-md-6">
                        <ul class="list-group">
                            <li class="list-group-item"><strong>Landlord:</strong> <span class="text-right">{{ property.landlord }}</span></li>
                        <li class="list-group-item"><strong>Maintenance Contact:</strong> <span class="text-right">{{ property.maintenance_contact }}</span></li>
                        <li class="list-group-item"><strong>Lease Terms:</strong> <span class="text-right">{{ property.lease_terms }}</span></li>
                        <li class="list-group-item"><strong>Description:</strong> <span class="text-right">{{ property.description }}</span></li>
                        <li class="list-group-item"><strong>Built Year:</strong> <span class="text-right">{{ property.built_year }}</span></li>
                        <li class="list-group-item"><strong>Parking Spots:</strong> <span class="text-right">{{ property.parking_spots }}</span></li>
                        </ul>
                    </div>
                </div>
                    <!-- include the building / Property Editor form here -->
                    {% if property_editor %}
                        {% include 'building/edit_building.html' %}
                    {% endif %}
            </div>
        </div>

        <!-- Units List -->
        <div id="units-list" class="tab-pane fade">
            <div class="card">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h3 class="card-title"><span class="font-weight-bold">{{ property.name }}</span></h3>
                <div>
                    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#addPropertyUnitModal">
                        Add Property Unit
                    </button>
                </div>
            </div>
            </div>
            <div class="card-body ">
                <table class="table table-striped table-bordered">
                    <thead>
                        <tr>
                            <th>Unit Number</th>
                            <th>Is Occupied</th>
                            <th>Rental Amount</th>
                            <th class="d-none d-sm-table-cell">Leased</th>
                            <th class="d-none d-sm-table-cell">Unit Area</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for unit in units %}
                            <tr>
                                <td><a href="{{ url_for('buildings.get_unit', building_id=unit.property_id, unit_id=unit.unit_id) }}" class="alert-link"> {{ unit.unit_number }}</a></td>
                                <td>{{ unit.is_occupied }}</td>
                                <td>{{ unit.rental_amount }}</td>
                                <td>{{ True if unit.tenant_id else False }}</td>
                                <td class="d-none d-sm-table-cell">{{ unit.unit_area }}</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>

{# tab includes #}
{% include "building/modals/add_unit.html" %}
{% include "building/modals/edit_property.html" %}

{% endblock %}

{#{% block scripts %}#}
{#    <script src="{{ url_for('static', filename='js/property/manager.js') }}"></script>#}
{#{% endblock %}#}